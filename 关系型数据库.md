## 背景

第一代数据库系统是20世纪70年代研制的层次和网状数据库系统。而关系型数据库是第二代数据库系统，1970年IBM公司的San Jose研究试验室的研究员Edgar F. Codd发表了题为《大型共享数据库数据的关系模型》的论文，提出了关系数据模型，开创了关系数据库方法和关系数据库理论，为关系数据库技术奠定了理论基础。Edgar F. Codd于1981年被授予ACM图灵奖，以表彰他在关系数据库研究方面的杰出贡献。

20世纪70年代是关系数据库理论研究和原型开发的时代，其中以IBM公司的San Jose研究试验室开发的System R和Berkeley大学研制的Ingres为典型代表。大量的理论成果和实践经验终于使关系数据库从实验室走向了社会，因此，人们把20世纪70年代称为数据库时代。20世纪80年代几乎所有新开发的系统均是关系型的，其中涌现出了许多性能优良的商品化关系数据库管理系统，如eXtremeDB、DB2、Ingres、Oracle、Informix、Sybase等。这些商用数据库系统的应用使数据库技术日益广泛地应用到企业管理、情报检索、辅助决策等方面，成为实现和优化信息系统的基本技术。

目前主流的关系型数据库主要有：

* MySQL
* Oracle
* PostgreSQL
* Sqlite

## MySQL

MySQL是一个开放源代码的关系数据库管理系统。原开发者为瑞典的MySQL AB公司，最早是在2001年MySQL3.23进入到管理员的视野并在之后获得广泛的应用。2008年MySQL公司被Sun公司收购并发布了首个收购之后的版本MySQL5.1，该版本引入分区、基于行复制以及plugin API。移除了原有的BerkeyDB引擎，同时，Oracle收购InnoDB Oy发布了InnoDB plugin，这后来发展成为著名的InnoDB引擎。2010年Oracle收购Sun公司，这也使得MySQL归入Oracle门下，之后Oracle发布了收购以后的首个版本5.5，该版本主要改善集中在性能、扩展性、复制、分区以及对windows的支持。目前版本已发展到5.7。

和其它数据库相比，MySQL有点与众不同，它的架构可以在多种不同场景中应用并发挥良好作用。主要体现在存储引擎的架构上，插件式的存储引擎架构将查询处理和其它的系统任务以及数据的存储提取相分离。这种架构可以根据业务的需求和实际需要选择合适的存储引擎。

![](/assets/shujuku_1.png)

MySQL从逻辑上可以分为上图所示的四层：

* 最上层是一些客户端和连接服务，包含本地sock通信和大多数基于客户端/服务端工具实现的类似于tcp/ip的通信。主要完成一些类似于连接处理、授权认证、及相关的安全方案。在该层上引入了线程池的概念，为通过认证安全接入的客户端提供线程。同样在该层上可以实现基于SSL的安全链接。服务器也会为安全接入的每个客户端验证它所具有的操作权限。
* 第二层架构主要完成大多少的核心服务功能，如SQL接口，并完成缓存的查询，SQL的分析和优化及部分内置函数的执行。所有跨存储引擎的功能也在这一层实现，如过程、函数等。在该层，服务器会解析查询并创建相应的内部解析树，并对其完成相应的优化如确定查询表的顺序，是否利用索引等，最后生成相应的执行操作。如果是select语句，服务器还会查询内部的缓存。如果缓存空间足够大，这样在解决大量读操作的环境中能够很好的提升系统的性能。
* 存储引擎层，存储引擎真正的负责了MySQL中数据的存储和提取，服务器通过API与存储引擎进行通信。不同的存储引擎具有的功能不同，这样我们可以根据自己的实际需要进行选取。
* 数据存储层，主要是将数据存储在运行于裸设备的文件系统之上，并完成与存储引擎的交互。

关于 MySQL 的并发控制与锁控制，事务，存储引擎，备份等，可先参见：[MySQL基础](http://harisxiong.blog.51cto.com/7513022/1351370)

关于 MySQL 的使用及优化文档，请参见：[MySQL手册](http://dev.mysql.com/doc/refman/5.7/en/)

## OracleDB

ORACLE数据库系统是美国ORACLE公司（甲骨文）提供的以分布式数据库为核心的一组软件产品，是目前最流行的客户/服务器\(CLIENT/SERVER\)或B/S体系结构的数据库之一。比如SilverStream就是基于数据库的一种中间件。ORACLE数据库是目前世界上使用最为广泛的数据库管理系统，作为一个通用的数据库系统，它具有完整的数据管理功能；作为一个关系数据库，它是一个完备关系的产品；作为分布式数据库它实现了分布式处理功能。但它的所有知识，只要在一种机型上学习了ORACLE知识，便能在各种类型的机器上使用它。

Oracle数据库最新版本为Oracle Database 12c。Oracle数据库12c引入了一个新的多承租方架构，使用该架构可轻松部署和管理数据库云。此外，一些创新特性可最大限度地提高资源使用率和灵活性，如Oracle Multitenant可快速整合多个数据库，而Automatic Data Optimization和Heat Map能以更高的密度压缩数据和对数据分层。这些独一无二的技术进步再加上在可用性、安全性和大数据支持方面的主要增强，使得Oracle数据库12c成为私有云和公有云部署的理想平台。

在了解了ORACLE数据库后，Oracle采用的是并行服务器模式，这非常关键，事务查询和更新能在多个节点之间并行进行，是 Oracle数据库能够成为一个真正企业级数据库，且优于大部分开源数据库和其他竞品的原因。而向 Sybase SQL Server 采用的是虚拟服务器模式，它没有将一个查询分解成多个子查询，再在不同的CPU上同时执行这些子查询。我们可以说在对称多处理方面 Oracle 的性能优于 Sybase 这一类数据库的性能。业务量往往在系统运行后不断提高，如果数据库数量达到 GB 以上时，我们在提高系统的性能方面可以从两方面入手，一种是提高单台服务器的性能，还有就是增加服务器数目。基于此，如果我们是提高单台服务器的性能,选择 Oracle 数据库较好，因为它们能在对称多CPU的系统上提供并行处理。基于这种特点，Oracle 数据库适合的领域比如：从事的社会保险软件的开发，考虑到数据量大，并发操作比较多，实时性要求高，后台基本采取的是 Oracle 数据库。Oracle 服务器由 Oracle 数据库和 Oracle 实例组成。Oracle 实例由系统全局区内存结构和用于管理数据库的后台进程组成。

关于 Oracle 数据库的使用与原理，请参见：[Oracle数据库文档](http://www.oracle.com/technetwork/database/enterprise-edition/documentation/index.html)

## PostgreSQL

PostgreSQL是一个非常优秀的关系数据库实现，全功能，开源且免费使用。数据库开发商和开源开发者都是 PostgreSQL 的热心拥护者。任何使用程序管理大量数据的人都可以从数据库中获得大量益处。

PostgreSQL 支持大量的主流开发语言，包括C，C++，Perl，Python，Java，Tcl以及PHP。它是最接近工业标准SQL92的查询语言，并且正在实现新的功能以兼容最新的SQL标准：SQL2003。PostgreSQL也获得数个奖项，包括三次被评为Linux Journal杂志编辑选择奖最佳数据库（2000,2003和2004年度）以及2004年度Linux新媒体奖最佳数据库系统。我们也许我们有点超越自我。你也许想知道到底PostgreSQL是什么，为什么你要使用它。

PostgreSQL 与 MySQL 类似，也是关系行数据库，但是现在已经加入了 JSON 支持，成为少数几个支持NoSQL的关系型数据库之一。那么还有那些方面让我们有理由去选择 PostgreSQL 而部署 MySQL呢：

* ANSI标准兼容性：与先前的版本相比，MySQL已经有了长足的进步，但MySQL背后的哲学是，如果客户喜欢，他们就会支持非标准扩展，而PostgreSQL从开始就将标准构建到平台里。不过，二者殊途同归，差别不大；
* ACID遵从性：PostgreSQL有一个存储引擎，而MySQL有9个，但只有MyIsam和InnoDB与大部分用户有关，其中，后者为默认存储引擎。InnoDB和PostgreSQL都完全遵循ACID，差别不大；
* 无锁表修改：MyIsam使用表级锁来提升速度，这会导致写互斥。但PostgreSQL和InnoDB均使用行级锁，差别不大；
* 子查询：长期以来，这一直是MySQL的一个弱点，虽然5.6.5作了重大改进，但PostgreSQL对表连接支持得更好，尤其是MySQL不支持全外连接，因此，这方面PostgreSQL胜过MySQL；
* JSON支持和NoSQL：PostgreSQL最近增加了JSON支持，与传统的关系型数据库相比，它提供了更大的数据存储灵活性，因此，这方面PostgreSQL胜过MySQL。

* 更好的许可：PostgreSQL采用类似MIT的许可协议，允许开发人员做任何事情，包括在开源或闭源产品中商用，而MySQL的客户端遵循GPL许可协议，所以开发人员必须向Oracle付费或者将自己的应用程序开源；
* 更好的数据一致性： PostgreSQL会在数据插入和更新之前进行严格的验证，确保数据合法才会进行相应的操作，但在MySQL中，开发人员需要将服务器设定为严格SQL模式才能达到同样的目的，否则可能会产生不规范数据；
* 服务器扩展：MySQL提供了插件程序API，支持C/C++或任何兼容C的语言，而且从5.7.3版本开始支持全文搜索，PostgreSQL有一个类似的系统但支持的语言更多，包括C/C++、Java、.Net、Perl、 Python、Ruby、Tcl、ODBC等，它甚至可以在单独的进程中运行用户提供的代码；除了所有关系型数据库都包含的有关数据库、表和列的一般信息外，PostgreSQL系统目录中还可以包含关于数据类型、函数和存取方法的信息，开发人员可以通过修改这些信息实现扩展，使用更灵活。

关于 PostgresSQL，请参见：[PostgresSQL技术文档](https://wiki.postgresql.org/wiki/Main_Page)

## Sqlite

自几十年前出现的商业应用程序以来，数据库就成为软件应用程序的主要组成部分。正与数据库管理系统非常关键一样，它们也变得非常庞大，并占用了相当多的系统资源，增加了管理的复杂性。随着软件应用程序逐渐模块模块化，一种新型数据库会比大型复杂的传统数据库管理系统更适应。嵌入式数据库直接在应用程序进程中运行，提供了零配置（zero-configuration）运行模式，并且资源占用非常少。 SQLite是一个开源的嵌入式关系数据库，它在2000年由D. Richard Hipp发布，它的减少应用程序管理数据的开销，SQLite可移植性好，很容易使用，很小，高效而且可靠。 SQLite嵌入到使用它的应用程序中，它们共用相同的进程空间，而不是单独的一个进程。从外部看，它并不像一个RDBMS，但在进程内部，它却是完整的，自包含的数据库引擎。 嵌入式数据库的一大好处就是在你的程序内部不需要网络配置，也不需要管理。因为客户端和服务器在同一进程空间运行。SQLite 的数据库权限只依赖于文件系统，没有用户帐户的概念。SQLite 有数据库级锁定，没有网络服务器。它需要的内存，其它开销很小，适合用于嵌入式设备。你需要做的仅仅是把它正确的编译到你的程序。相比于 MySQL，PostgresSQL，它的最大优势就是，它是一个轻量级，资源消耗少的数据库，容易嵌入到应用或者嵌入式平台（如：Android，终端机等环境中）

关于 Sqlite 设计原理，请参见：[深入理解Sqlite](https://ykj373998035.gitbooks.io/-sqlite/content/index.html)

关于 Sqlite 的使用，请参见：[Sqlite文档](https://sqlite.org/docs.html)

