Ceph RBD 块设备提供了很多特性与功能

### 特性

* layering：提供镜像分层特性，实现镜像克隆功能，该特性开启后，每个镜像都可以有其父镜像 —— 该镜像为其父镜像的一个克隆
* striping：条带化功能，开启后支持数据条带化，让数据可以在一组对象集（Object Sets）上实现条带化功能（就像 RAID0 一样，RAID0 中，条带化功能底层使用了多个物理磁盘，而这里底层使用的是多个Objects），如下图：

       ![](/assets/feature_1.png)
* exclusive-lock：乐观锁，开启该功能后，块设备自带乐观锁功能，能够序列化多个客户端同时下发该块设备的请求，而无需用户在使用块设备时，进行主动加锁功能。
* object-map：对象映射表，开启后，Ceph 将为该块设备记录对象映射表，对象映射表描述了哪些对象在OSD上是真实存在的。由于 Ceph 镜像的创建和使用是瘦分配，只有当数据真正写入时，才会在 OSD 上生成真实的对象，并占用磁盘的物理空间。而如果不记录对象映射表，用户在访问从父镜像克隆出来的子镜像，删除镜像，统计镜像使用率时，必须去后端扫描对象是否存储，这对于网络存储来说效率非常低。Ceph 通过记录对象映射表，使得客户端能够直接查询映射表，得知特定的 Object 是否在后端存在。
* fast-diff
* deep-flatten
* journaling

### 功能



