在存储领域，数据冗余机制其实这几十年来没有太多进展，RAID，副本一直是当仁不让的最终选择。而近几年，尤其是规模较大的应用场景下，纠删码越来越多的出现在选择的视野范围，成为RAID，副本之外的第三种选择，因此也获得了越来越多的关注。

RAID 在规模较大的场景下，存在以下问题：

* RAID 最多只支持到 RAID6，即允许同时损坏两块磁盘。而在大规模情况下，随着磁盘与服务器数量的增加，单盘的损坏概率也会上升，所以需要更多的副本来保证数据的可靠性，而在传统  RAID 技术标准是不能支持任意多副本数量的。
* 传统 RAID 技术通常情况下只以 block 为单位计算校验，在大规模分布式情况下，我们希望能够以任意的条带大小进行校验计算。
* 通常传统 RAID 6 技术仍然需要消耗1.5倍的空间，空间利用率低，而对于现在 SSD 快速设备来说，空间成本是很高的。
* 传统 RAID 技术，当一个磁盘损坏时，数据的重构只能从其他磁盘流向被替换的磁盘，数据重构的速度完全取决于损坏磁盘的带宽，而对于大容量的磁盘来说，重构可能会持续数天，这时候持续发生坏盘的概率是很高的，极大的增加了数据丢失的风险。

Erasure Code 正是用于解决传统 RAID 技术面临的这些困难。在高密度磁盘阵列，或者分布式系统中，RAID 技术已经不在适合了。Erasure Code 在使用的灵活性，空间使用率，数据重构速度上有这较大的优势，但需要付出一定的性能代价以及总线或网络的带宽损耗。


纠删码工作流程：

* 数据分割，将写入数据A，分割成X1，X2，并且计算校验计算

![](/assets/jiushanma_1.png)

* 校验计算过程：A1 ＝ X1， A2 ＝ X2， A3 ＝ X1 ＋ X2，A4 ＝ X1 ＋ 2\*X2

![](/assets/jiushanma_2.png)

* 通过一致性 Hash 或者其他映射方式，将数据映射至对应的节点并持久化入磁盘

![](/assets/jiushanma_4.png)



